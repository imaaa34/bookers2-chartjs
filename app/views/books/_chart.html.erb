<canvas id="pieChart">
</canvas>

<script>
$(document).on('turbolinks:load', function(){
  var ctx = document.getElementById("pieChart");
  var pieChart = new Chart(ctx, {
    type: 'pie',
    data: {
      labels: ["Nobel", "Fantasy", "SF", "Mystery", "Romance", "Business", "Other"], //データ項目のラベル
      datasets: [{
          backgroundColor: [
              "#c97586",
              "#bbbcde",
              "#93b881",
              "#e6b422",
              "#e73771",
              "#94D0E4",
              "#DDDD9B"
          ],
          data: [
            <%= books.where(category: "Nobel").count %>,
            <%= books.where(category: "Fantasy").count %>,
            <%= books.where(category: "SF").count %>,
            <%= books.where(category: "Mystery").count %>,
            <%= books.where(category: "Romance").count %>,
            <%= books.where(category: "Business").count %>,
            <%= books.where(category: "Other").count %>
          ] //グラフのデータ
      }]
    },
    options: {
      title: {
        display: true,
        //グラフタイトル
        text: 'カテゴリー別割合'
      }
    }
  });
});
</script>